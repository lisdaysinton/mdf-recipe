name: Midnight Demon Framework
author: lisdaysinton
version: 1.0.0

description: >
  This recipe installs the core components of the Midnight Demon Framework (MDF),
  including inventory, admin tools, shared libraries, and core logic. It ensures
  your MySQL database is initialized and your server.cfg is set up correctly.

tasks:
  - action: download_github
    src: lisdaysinton/mdf-core
    ref: main
    dest: ./resources/[mdf]/mdf-core

  - action: download_github
    src: lisdaysinton/mdf-lib
    ref: main
    dest: ./resources/[mdf]/mdf-lib

  - action: download_github
    src: lisdaysinton/mdf-inv
    ref: main
    dest: ./resources/[mdf]/mdf-inv

  - action: download_github
    src: lisdaysinton/mdf-admin
    ref: main
    dest: ./resources/[mdf]/mdf-admin

  - action: sql
    file: setup.sql

  - action: ensure
    resources:
      - [mdf]/mdf-core
      - [mdf]/mdf-lib
      - [mdf]/mdf-inv
      - [mdf]/mdf-admin

  - action: cfg
    data: |
      # MDF Server Config
      setr MDF_VERSION 1.0.0
      set mysql_connection_string "mysql://root@localhost/mdf_framework"
      ensure [mdf]

